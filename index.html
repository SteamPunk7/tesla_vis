<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Trippy Visualizer with Photos</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: black;
      overflow: hidden;
    }
    canvas {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 0;
    }
    .photo {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 75vw;
      height: auto;
      max-height: 75vh;
      transform: translate(-50%, -50%);
      opacity: 0;
      transition: opacity 2s ease-in-out;
      z-index: 1;
    }
    .controls {
      position: absolute;
      bottom: 10px;
      right: 10px;
      z-index: 10;
      color: white;
      font-family: sans-serif;
    }
    .controls button {
      margin-right: 5px;
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <!-- Images -->
  <img class="photo" id="img1" src="img1.jpg">
<img class="photo" id="img2" src="img2.jpg">
<img class="photo" id="img3" src="img3.jpg">
<img class="photo" id="img4" src="img4.jpg">
<img class="photo" id="img5" src="img5.jpg">
<img class="photo" id="img6" src="img6.jpg">
<img class="photo" id="img7" src="img7.jpg">
<img class="photo" id="img8" src="img8.jpg">
<img class="photo" id="img9" src="img9.jpg">
<img class="photo" id="img10" src="img10.jpg">
<img class="photo" id="img11" src="img11.jpg">
<img class="photo" id="img12" src="img12.jpg">
<img class="photo" id="img13" src="img13.jpg">
<img class="photo" id="img14" src="img14.jpg">
<img class="photo" id="img15" src="img15.jpg">
<img class="photo" id="img16" src="img16.jpg">
<img class="photo" id="img17" src="img17.jpg">
  <img class="photo" id="img18" src="sunset.jpg">

  <div class="controls">
    <button onclick="rewind()">⏪</button>
    <button onclick="togglePlayPause()">⏯️</button>
    <button onclick="forward()">⏩</button>
    <button onclick="toggleFullscreen()">⛶</button>
    <div id="statusBar">0:00 / 10:32</div>
  </div>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    function resize() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    let t = 0;
    let playing = true;
    let startTime = Date.now();
    const duration = 632000;

    function drawTunnel() {
      if (!playing) {
        requestAnimationFrame(drawTunnel);
        return;
      }
      const w = canvas.width;
      const h = canvas.height;
      const imageData = ctx.createImageData(w, h);
      const data = imageData.data;

      for (let y = 0; y < h; y++) {
        for (let x = 0; x < w; x++) {
          let dx = x - w / 2;
          let dy = y - h / 2;
          let dist = Math.sqrt(dx * dx + dy * dy);
          let angle = Math.atan2(dy, dx);
          let swirl = Math.sin(dist * 0.05 - t) + Math.cos(angle * 6 + t * 0.3);
          let r = Math.floor(90 * (Math.sin(swirl + t) + 1));
          let g = Math.floor(90 * (Math.sin(swirl + t + 2) + 1));
          let b = Math.floor(90 * (Math.sin(swirl + t + 4) + 1));
          const index = (x + y * w) * 4;
          data[index] = r;
          data[index + 1] = g;
          data[index + 2] = b;
          data[index + 3] = 255;
        }
      }

      ctx.putImageData(imageData, 0, 0);
      t += 0.03;
      updateStatusBar();
      requestAnimationFrame(drawTunnel);
    }

    drawTunnel();

    const totalImages = 18;
    const images = [];
    for (let i = 1; i <= totalImages; i++) {
      images.push(document.getElementById('img' + i));
    }

    let current = 0;
    let fadeDuration = 2000;
    let visibleDuration = 20000;
    let intervalDuration = 15000;

    function cycleImages() {
      if (current >= images.length) return;
      let img = images[current];
      img.style.opacity = 1;

      setTimeout(() => {
        img.style.opacity = 0;
        current++;
        setTimeout(cycleImages, intervalDuration);
      }, visibleDuration);
    }

    setTimeout(cycleImages, 1000);

    function togglePlayPause() {
      playing = !playing;
      if (playing) {
        startTime = Date.now() - t * 1000;
        drawTunnel();
      }
    }

    function rewind() {
      t = Math.max(0, t - 5);
      startTime = Date.now() - t * 1000;
    }

    function forward() {
      t = Math.min(duration / 1000, t + 5);
      startTime = Date.now() - t * 1000;
    }

    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
      } else {
        document.exitFullscreen();
      }
    }

    function updateStatusBar() {
      const elapsed = Math.floor((Date.now() - startTime) / 1000);
      const minutes = Math.floor(elapsed / 60);
      const seconds = elapsed % 60;
      document.getElementById("statusBar").textContent = `${minutes}:${seconds.toString().padStart(2, '0')} / 10:32`;
    }
  </script>
</body>
</html>